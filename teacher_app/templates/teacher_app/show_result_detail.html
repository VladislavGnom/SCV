{% extends 'base-special.html' %}

{% load static %}

{% block main %}
<h1>Все работы класса:</h1>

<div class="mb-3">
    <a download href="{% static 'excel_files/' %}{{ filename }}">Скачать файл в виде таблицы</a>
</div>

{% if usertests %}
<table class="table">
    <thead>
        <tr>
            <th>Ученик</th>
            <th>Название теста</th>
            <th>Статус выполнения</th>
            <th>Правильных ответов</th>
        </tr>
    </thead>
    <tbody>
        {% for usertest in usertests %}
            <tr>
                <td>{{ usertest.user.first_name }} {{ usertest.user.last_name }}</td>
                <td>{{ usertest.title }}</td>
                <td>{% if usertest.is_complete %} ✅ {% else %} ❌ {% endif %}</td>
                <td>{{ usertest.right_answers }}/{{ count_tasks }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<h2>Пока нет работ класса</h2>
{% endif %}

{% endblock %}
